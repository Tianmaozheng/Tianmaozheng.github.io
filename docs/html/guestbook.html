<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>留言板 | 小田的博客</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../personal_blog/css/style.css">
    <style>
        body.guestbook-page .post-category {
            position: static;
            display: inline-block;
            background: transparent;
            color: var(--primary-color);
            padding: 0;
            border-radius: 0;
            margin: 10px 0 6px;
        }
        body.guestbook-page .post-info { position: static; }
        .guestbook-card { background:#fff; border-radius:var(--border-radius); box-shadow:var(--box-shadow); padding:20px; }
        .guestbook-form { display:flex; flex-direction:column; gap:12px; margin-top:10px; }
        .guestbook-form input, .guestbook-form textarea { padding:10px 12px; border:1px solid #ddd; border-radius:8px; }
        .guestbook-form button { align-self:flex-start; background:var(--primary-color); color:#fff; border:none; padding:8px 14px; border-radius:8px; cursor:pointer; }
    </style>
</head>
<body class="guestbook-page">
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo"><a href="/"></a></div>
            <ul class="nav-links">
                <li><a href="/">首页</a></li>
                <li><a href="articles.html">技术文章</a></li>
                <li><a href="projects.html">项目作品</a></li>
                <li><a href="about.html">关于我</a></li>
                <li><a href="guestbook.html" class="active">留言板</a></li>
                <li><a href="ai_chat.html">AI问答</a></li>
            </ul>
            <div class="search-box">
                <input type="text" placeholder="搜索...">
                <button><i class="fas fa-search"></i></button>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <aside class="profile-sidebar">
            <div class="profile-card">
                <div class="profile-image">
                    <img src="../personal_blog/img/sign.jpg" alt="小田">
                </div>
                <h2>小田</h2>
                <p class="profile-title">全栈开发者 & 技术博主</p>
                <p class="profile-bio">欢迎留言交流建议或问题。</p>
            </div>
        </aside>

        <main class="content">
            <section class="recent-posts">
                <h2 class="section-title">留言板</h2>
                <div class="guestbook-card">
                    <div class="post-category">交流</div>
                    <h3>给我留言</h3>
                    <form class="guestbook-form" action="https://formsubmit.co/2151447128@qq.com" method="POST">
                        <input type="hidden" name="_subject" value="博客留言板新留言">
                        <input type="hidden" name="_template" value="table">
                        <input type="hidden" name="_captcha" value="false">
                        <!-- _next 将在提交时动态设置为当前站点的绝对地址，避免跳到 formsubmit 域名下 -->

                        <input type="text" name="name" placeholder="您的称呼" required>
                        <input type="email" name="email" placeholder="邮箱（选填）">
                        <textarea rows="4" name="message" placeholder="留言内容" required></textarea>
                        <button type="submit">提交</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <div id="footer-mount"></div>

    <a href="#" class="back-to-top"><i class="fas fa-arrow-up"></i></a>
    <script src="../personal_blog/js/script.js"></script>
    <script>
    (function() {
        try {
            const params = new URLSearchParams(window.location.search);
            if (params.get('success') === '1') {
                alert('感谢你的留言！我已收到邮件通知，会尽快查看回复。');
                const url = new URL(window.location);
                url.searchParams.delete('success');
                window.history.replaceState({}, '', url);
            }
        } catch (e) {}
        try {
            const form = document.querySelector('.guestbook-form');
            form.addEventListener('submit', function() {
                let next = form.querySelector('input[name="_next"]');
                if (!next) {
                    next = document.createElement('input');
                    next.type = 'hidden';
                    next.name = '_next';
                    form.appendChild(next);
                }
                // 跳回本站的留言页，并带 success=1
                next.value = window.location.origin + '/html/guestbook.html?success=1';
            });
        } catch (e) {}
    })();
    </script>
</body>
</html>

